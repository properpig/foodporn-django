!function(){"use strict";function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=t.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function t(e){e&&(o=e),$.getJSON(window.apiUrl+"/"+a+"/list/"+window.username+"/?"+o,function(e){console.log(e),s="food"===a?Handlebars.compile(l):"restaurants"===a?Handlebars.compile(n):Handlebars.compile(r),$(".main-div").html(s(e))}).done(function(){$(".follow-button").click(function(){if($(this).hasClass("follow-user")){var e=$(this).data("id"),t=$(this),a=$(this).parent().find(".followers"),o=parseInt(a.text().split(" ")[0]);$.getJSON(window.apiUrl+"/user/follow/"+e+"/"+window.username+"/",function(e){"success"===e.status&&(t.toggleClass("following"),"followed"===e.message?a.text(o+1+" Followers"):a.text(o-1+" Followers"))})}else{var s=$(this).data("id");$.getJSON(window.apiUrl+"/restaurant/follow/"+s+"/"+window.username+"/",function(e){console.log(e)}),$(this).toggleClass("following")}event.stopPropagation()})})}var a=e("type"),o=window.location.search.substring(1);"food"===a?($(".sub-nav-item").eq(0).addClass("selected"),$("#search").attr("placeholder","Search for Food")):"restaurants"===a?($(".sub-nav-item").eq(1).addClass("selected"),$(".container > .main-buttons").children().toggleClass("hidden"),$("#search").attr("placeholder","Search for Restaurants")):($(".sub-nav-item").eq(2).addClass("selected"),$("#search").attr("placeholder","Search for People")),$("#search").val(e("search"));var s,l=$("#food-template").html(),n=$("#restaurants-template").html(),r=$("#people-template").html();$(".main-buttons .submit-search").click(function(){var a;a="food"===e("type")?getSearchQueryFood():"restaurants"===e("type")?getSearchQueryRestaurant():getSearchQueryPeople(),t(a)}),t(null)}();