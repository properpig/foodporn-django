!function(){"use strict";function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=a.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function a(e){e&&(s=e),$.getJSON(window.apiUrl+"/"+t+"/list/"+window.username+"/?"+s,function(e){console.log(e),o="food"===t?Handlebars.compile(l):"restaurants"===t?Handlebars.compile(n):Handlebars.compile(r),$(".main-div").html(o(e))}).done(function(){$(".follow-button").click(function(){if($(this).hasClass("follow-user")){var e=$(this).data("id"),a=$(this),t=parseInt(a.data("count")),s=a.parent().find(".stats .followers");$.getJSON(window.apiUrl+"/user/follow/"+e+"/"+window.username+"/",function(e){"success"===e.status&&(a.toggleClass("following"),"followed"===e.message?t++:t--,s.html('<i class="fa fa-users"></i> '+t),a.data("count",t))})}else{var o=$(this).data("id"),l=$(this),n=parseInt(l.data("count")),r=l.parent().find(".stats .followers");$.getJSON(window.apiUrl+"/restaurant/follow/"+o+"/"+window.username+"/",function(e){console.log(e)}),$(this).toggleClass("following"),$(this).hasClass("following")?n++:n--,r.html('<i class="fa fa-users"></i> '+n),l.data("count",n)}event.stopPropagation()})})}var t=e("type"),s=window.location.search.substring(1);"food"===t?($(".sub-nav-item").eq(0).addClass("selected"),$("#search").attr("placeholder","Search for Food")):"restaurants"===t?($(".sub-nav-item").eq(1).addClass("selected"),$(".container > .main-buttons").children().toggleClass("hidden"),$("#search").attr("placeholder","Search for Restaurants")):($(".sub-nav-item").eq(2).addClass("selected"),$("#search").attr("placeholder","Search for People")),$("#search").val(e("search"));var o,l=$("#food-template").html(),n=$("#restaurants-template").html(),r=$("#people-template").html();$(".main-buttons .submit-search").click(function(){var t;t="food"===e("type")?getSearchQueryFood():"restaurants"===e("type")?getSearchQueryRestaurant():getSearchQueryPeople(),a(t)}),a(null)}();