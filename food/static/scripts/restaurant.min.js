!function(){"use strict";function t(){$.getJSON(window.apiUrl+"/restaurant/"+l+"/"+window.username+"/",function(t){i=t.foods,n=t.deals,console.log(t),$(".sub-name").text(t.name),$(".main-div").html(r(t))}).done(function(){"reviews"===getParameterByName("nav")&&setTimeout(function(){$(".infopage").eq(2).click()},1e3),$(".follow-button").click(function(a){var o=$(this).data("id");$.getJSON(window.apiUrl+"/restaurant/follow/"+o+"/"+window.username+"/",function(){t()}),$(this).toggleClass("following"),a.stopPropagation()}),$(".share-button").click(function(){if($(this).toggleClass("clicked"),$(this).hasClass("clicked")){$(this).attr("src","images/icons/share.svg"),$(".circle.share").show(),$(".circle.share").css({opacity:1});var t=$(".circle.share"),a=Math.PI/4*2/t.length,o=0,i=0,e=Math.PI/2;$(".circle.share").each(function(){o=150*Math.cos(e),i=160*Math.sin(e)-45,$(this).animate({right:o,top:i}),e-=a})}else $(".circle.share").animate({right:0,top:0,opacity:0},function(){$(".circle.share").hide(),$(".share-button").attr("src","images/icons/share-o.svg")})});var i;$(".circle.share").click(function(){var t=$(this).data("type");clearTimeout(i),$(".share-confirmation").show(),$(".share-confirmation .site").text(t),$(".share-confirmation").animate({bottom:15,opacity:1},500,function(){i=setTimeout(function(){$(".share-confirmation").animate({bottom:-100,opacity:0},function(){$(".share-confirmation").hide()})},1500)})}),$(".menu-items .modal-button").click(function(){e=$(this).data("index"),a(e);var t=$(this).attr("id");$("#modal-"+t).addClass("open"),$("#modal-"+t+" .modal").animate({marginTop:$(window).height()/9})}),$(".deal-items .modal-button").click(function(){s=$(this).data("index"),o(s);var t=$(this).attr("id");$("#modal-"+t).addClass("open"),$("#modal-"+t+" .modal").animate({marginTop:$(window).height()/11})})})}function a(t){var o=0!==t,n=t!==i.length-1;$("#modal-menu-item .modal").html(h({not_first:o,not_last:n,item:i[t]}));var s=$("#modal-menu-item .photo img").width();$("#modal-menu-item .photo img").height(s),$(".controls .right").click(function(t){e!==i.length-1&&(a(++e),t.stopPropagation())}),$(".controls .left").click(function(t){0!==e&&(a(--e),t.stopPropagation())})}function o(t){var a=0!==t,i=t!==n.length-1;$("#modal-restaurant-deals .modal").html(u({not_first:a,not_last:i,deals:n[t]}));var e=$("#modal-restaurant-deals .photo img").width();$("#modal-restaurant-deals .photo img").height(e),$(".controls .right").click(function(t){s!==n.length-1&&(o(++s),t.stopPropagation())}),$(".controls .left").click(function(t){0!==s&&(o(--s),t.stopPropagation())})}var i,e,n,s,l=getParameterByName("id"),c=$("#restaurant-template").html(),r=Handlebars.compile(c),m=$("#menu-template").html(),h=Handlebars.compile(m),d=$("#deals-template").html(),u=Handlebars.compile(d),f=!1;$(".main-div").scroll(function(){var t=-$(".main-photo").offset().top-$(".main-div").offset().top;return t>5?($(".sub-nav").removeClass("hidden"),t>100&&(t=100),$(".sub-nav").css({opacity:t/100}),f||$(".sub-nav").children().each(function(){var t=$(this).data("anchor"),a=$("."+t).offset().top-$(".main-div").offset().top-$(".sub-nav").offset().top;0>a&&($(".sub-nav-item").removeClass("selected"),$(this).addClass("selected"))}),void 0):($(".sub-nav").addClass("hidden"),void 0)}),$(".sub-nav-item").click(function(){$(".sub-nav-item").removeClass("selected"),$(this).addClass("selected");var t=$(this).data("anchor");f=!0,$(".main-div").animate({scrollTop:$("."+t).offset().top-$(".main-photo").offset().top-$(".sub-nav").height()},1e3,function(){f=!1})}),t()}();