!function(){"use strict";function e(){function e(){var e=$("#start").val();e&&(o=e);var t=$(".transportMode:checked").val(),a={origin:o,destination:n,travelMode:google.maps.TravelMode[t]};i.setPanel(document.getElementById("directions-panel")),r.route(a,function(e,t){t===google.maps.DirectionsStatus.OK&&i.setDirections(e)})}o=new google.maps.LatLng(1.296568,103.852118);var g={zoom:14,center:o};t=new google.maps.Map(document.getElementById("map-canvas"),g),i.setMap(t),$.getJSON(window.apiUrl+"/directions/"+c+"/"+window.username+"/",function(e){$(".sub-name").text("Get to "+e.restaurant.name),n=new google.maps.LatLng(e.restaurant.x,e.restaurant.y),o=new google.maps.LatLng(e.user.x,e.user.y);var t={origin:o,destination:n,travelMode:google.maps.DirectionsTravelMode.DRIVING};i.setPanel(document.getElementById("directions-panel")),r.route(t,function(e,t){t===google.maps.DirectionsStatus.OK&&i.setDirections(e)})}),a=document.getElementById("start");var l={componentRestrictions:{country:"sg"}};s=new google.maps.places.Autocomplete(a,l),google.maps.event.addListener(s,"place_changed",function(){e()}),$(".transportMode").click(function(){e()})}var t,n,o,a,s,i=new google.maps.DirectionsRenderer,r=new google.maps.DirectionsService,g=window.location.search.substring(1),c=g.substring(g.indexOf("=")+1,g.length);google.maps.event.addDomListener(window,"load",e)}();