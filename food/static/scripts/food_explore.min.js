!function(){"use strict";function t(){w=new Hammer(f),w.on("panleft panright",function(t){return 4===t.eventType?(r.animate({left:0,top:0},100),void 0):(t.deltaX<-150&&(w.off("panleft panright tap press swipeleft swiperight"),u.click()),t.deltaX>150&&(w.off("panleft panright tap press swipeleft swiperight"),p.click()),r.css({left:t.deltaX}),clearTimeout(g),g=setTimeout(function(){r.animate({left:0,top:0},100)},500),void 0)}),w.on("swipeleft",function(){w.off("panleft panright tap press swipeleft swiperight"),u.click()}),w.on("swiperight",function(){w.off("panleft panright tap press swipeleft swiperight"),p.click()}),w.on("press tap",function(){$(".controls .fa-info").click()})}function o(t){$.getJSON(window.apiUrl+"/food/list/"+window.username+"/?explore=true"+t,function(t){a=t,e(0)}).done(function(){null===localStorage.getItem("firsttime")&&($(".controls .fa-question").click(),localStorage.setItem("firsttime",!0))})}function i(o){var i,n="-100%";o?(n="100%",i=$(".likestamp")):i=$(".dislikestamp"),i.addClass("displayed"),setTimeout(function(){i.removeClass("displayed")},500),r.animate({left:n,top:0,opacity:0},500,function(){e(++s),r.css({left:0,opacity:1}),t()})}function e(t){t>a.length-1||($(".info").html(c(a[t])),r.attr("src","images/"+a[t].photo),t+1!==a.length&&(d.attr("src","images/"+a[t+1].photo),d.css("background-image","url(images/"+a[t+2].photo+")")))}var n=new Date;n=n.getTime(),0===$("#reloadValue").val().length?($("#reloadValue").val(n),$("body").show()):($("#reloadValue").val(""),location.reload());var a,l=$("#food-template").html(),c=Handlebars.compile(l),s=0;o("");var f=document.getElementById("food-photo"),r=$("#food-photo img"),d=$("#food-photo2 img"),p=$(".controls .fa-thumbs-o-up"),u=$(".controls .fa-thumbs-o-down");u.click(function(){$.getJSON(window.apiUrl+"/food/dislike/"+a[s].id+"/"+window.username+"/"),i(!1)}),p.click(function(){$.getJSON(window.apiUrl+"/food/like/"+a[s].id+"/"+window.username+"/"),i(!0)}),$(".controls .fa-info").click(function(){window.location="food.html?id="+a[s].id}),$(".controls .fa-question").click(function(){$(".instructions").fadeToggle()}),$(".controls .fa-undo").click(function(){0!==s&&(e(--s),$.getJSON(window.apiUrl+"/food/reset/"+a[s].id+"/"+window.username+"/"))}),$(".dismiss-button").click(function(){$(".instructions").fadeOut()});var m;$(".controls .circle").click(function(){m=$(this),m.addClass("clicked"),setTimeout(function(){m.removeClass("clicked")},400)}),$(".food-container").css({height:$(window).width()}),$("#food-photo img, #food-photo2 img").css({height:$(window).width()});var w=new Hammer(f);t();var g;$(".main-buttons .submit").click(function(){var t=getSearchQueryFood();o(t)})}();