!function(){"use strict";function t(){m=new Hammer(l),m.on("panleft panright",function(t){return 4===t.eventType?(f.animate({left:0,top:0},100),void 0):(t.deltaX<-150&&(m.off("panleft panright tap press swipeleft swiperight"),p.click()),t.deltaX>150&&(m.off("panleft panright tap press swipeleft swiperight"),d.click()),f.css({left:t.deltaX}),clearTimeout(w),w=setTimeout(function(){f.animate({left:0,top:0},100)},500),void 0)}),m.on("swipeleft",function(){m.off("panleft panright tap press swipeleft swiperight"),p.click()}),m.on("swiperight",function(){m.off("panleft panright tap press swipeleft swiperight"),d.click()}),m.on("press tap",function(){$(".controls .fa-info").click()})}function o(t){$.getJSON(window.apiUrl+"/food/list/"+window.username+"/?explore=true"+t,function(t){n=t,e(0)}).done(function(){null===localStorage.getItem("firsttime")&&($(".controls .fa-question").click(),localStorage.setItem("firsttime",!0))})}function i(o){var i,n="-100%";o?(n="100%",i=$(".likestamp")):i=$(".dislikestamp"),i.addClass("displayed"),setTimeout(function(){i.removeClass("displayed")},500),f.animate({left:n,top:0,opacity:0},500,function(){e(++a),f.css({left:0,opacity:1}),t()})}function e(t){t>n.length-1||($(".info").html(s(n[t])),f.attr("src","images/"+n[t].photo),t+1!==n.length&&(r.attr("src","images/"+n[t+1].photo),r.css("background-image","url(images/"+n[t+2].photo+")")))}var n,c=$("#food-template").html(),s=Handlebars.compile(c),a=0;o("");var l=document.getElementById("food-photo"),f=$("#food-photo img"),r=$("#food-photo2 img"),d=$(".controls .fa-thumbs-o-up"),p=$(".controls .fa-thumbs-o-down");p.click(function(){$.getJSON(window.apiUrl+"/food/dislike/"+n[a].id+"/"+window.username+"/"),i(!1)}),d.click(function(){$.getJSON(window.apiUrl+"/food/like/"+n[a].id+"/"+window.username+"/"),i(!0)}),$(".controls .fa-info").click(function(){window.location="food.html?id="+n[a].id}),$(".controls .fa-question").click(function(){$(".instructions").fadeToggle()}),$(".controls .fa-undo").click(function(){0!==a&&(e(--a),$.getJSON(window.apiUrl+"/food/reset/"+n[a].id+"/"+window.username+"/"))}),$(".dismiss-button").click(function(){$(".instructions").fadeOut()});var u;$(".controls .circle").click(function(){u=$(this),u.addClass("clicked"),setTimeout(function(){u.removeClass("clicked")},400)}),$(".food-container").css({height:$(window).width()}),$("#food-photo img, #food-photo2 img").css({height:$(window).width()});var m=new Hammer(l);t();var w;$(".main-buttons .submit").click(function(){var t=getSearchQueryFood();o(t)})}();