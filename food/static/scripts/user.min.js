!function(){"use strict";function e(){var e={center:{lat:1.296568,lng:103.852118},zoom:14,mapTypeControl:!1,scaleControl:!1,zoomControl:!1,streetViewControl:!1};n=new google.maps.Map(document.getElementById("map-canvas"),e),o()}function o(){var e=new google.maps.LatLngBounds,a=!1;$.getJSON(window.apiUrl+"/user/"+s+"/"+window.username+"/",function(o){$("#dynamic-info").html(l(o)),$(".sub-name").text(o.name),o.reviews.length>0&&(a=!0),$.each(o.reviews,function(o,a){var s=new google.maps.LatLng(a.restaurant_x,a.restaurant_y);t=new google.maps.Marker({position:s,map:n,title:"Hello World!"}),t.setMap(n),e.extend(s)})}).done(function(){if(a){n.fitBounds(e);var t=google.maps.event.addListener(n,"idle",function(){n.getZoom()>14&&n.setZoom(14),google.maps.event.removeListener(t)})}$(".follow-button").click(function(){var e=$(this).data("id"),n=$(this);$.getJSON(window.apiUrl+"/user/follow/"+e+"/"+window.username+"/",function(e){"success"===e.status&&(n.toggleClass("following"),o())})})})}var n,t,a=window.location.search.substring(1),s=a.substring(a.indexOf("=")+1,a.length),i=$("#user-template").html(),l=Handlebars.compile(i);google.maps.event.addDomListener(window,"load",e)}();