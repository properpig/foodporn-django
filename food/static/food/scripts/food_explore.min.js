!function(){"use strict";function t(){g=new Hammer(f),g.on("panleft panright",function(t){return 4===t.eventType?(p.animate({left:0,top:0},100),void 0):(t.deltaX<-100&&(g.off("panleft panright tap press swipeleft swiperight"),h.click()),t.deltaX>100&&(g.off("panleft panright tap press swipeleft swiperight"),m.click()),p.css({left:t.deltaX}),clearTimeout(k),k=setTimeout(function(){p.animate({left:0,top:0},100)},500),void 0)}),g.on("swipeleft",function(){g.off("panleft panright tap press swipeleft swiperight"),h.click()}),g.on("swiperight",function(){g.off("panleft panright tap press swipeleft swiperight"),m.click()}),g.on("press tap",function(){$(".controls .fa-info").click()})}function e(t){$.getJSON(window.apiUrl+"/food/list/"+window.username+"/?explore=true"+t,function(t){a=t,i(0)}).done(function(){null===localStorage.getItem("firsttime")&&($(".controls .fa-question").click(),localStorage.setItem("firsttime",!0))})}function o(e){var o,n="-100%";e?(n="100%",o=$(".likestamp")):o=$(".dislikestamp"),o.addClass("displayed"),setTimeout(function(){o.removeClass("displayed")},500),p.animate({left:n,top:0,opacity:0},500,function(){i(++r),p.css({left:0,opacity:1}),t()})}function i(t){t>a.length-1||($(".info").html(l(a[t])),p.attr("src","images/"+a[t].photo),t+1!==a.length&&(u.attr("src","images/"+a[t+1].photo),u.css("background-image","url(images/"+a[t+2].photo+")")))}var n=new Date;n=n.getTime(),0===$("#reloadValue").val().length?($("#reloadValue").val(n),$("body").show()):($("#reloadValue").val(""),location.reload());var a,s=$("#food-template").html(),l=Handlebars.compile(s),c=$("#history-template").html(),d=Handlebars.compile(c),r=0;e("");var f=document.getElementById("food-photo"),p=$("#food-photo img"),u=$("#food-photo2 img"),m=$(".controls .fa-thumbs-o-up"),h=$(".controls .fa-thumbs-o-down");h.click(function(){$.getJSON(window.apiUrl+"/food/dislike/"+a[r].id+"/"+window.username+"/"),o(!1)}),m.click(function(){$.getJSON(window.apiUrl+"/food/like/"+a[r].id+"/"+window.username+"/"),o(!0)}),$(".controls .fa-info").click(function(){window.location="food.html?id="+a[r].id}),$(".controls .fa-question").click(function(){$(".instructions").fadeToggle()}),$(".controls .fa-history").click(function(){var t=$(this).attr("id");$("#modal-"+t).addClass("open"),$("#modal-"+t+" .modal").animate({marginTop:90}),addCloseButton(t),$.getJSON(window.apiUrl+"/food/history/"+window.username+"/",function(t){console.log(t),$("#modal-history .history-list").html(d(t)).promise().done(function(){$(".buttons .like").click(function(t){t.stopPropagation();var e=$(this);if(!e.hasClass("selected")){var o=$(this).parent().find(".dislike"),i=$(this).parent().find(".clearlike"),n=e.data("id");$.getJSON(window.apiUrl+"/food/like/"+n+"/"+window.username+"/",function(){e.addClass("selected"),o.removeClass("selected"),i.removeClass("selected")})}}),$(".buttons .dislike").click(function(t){t.stopPropagation();var e=$(this);if(!e.hasClass("selected")){var o=$(this).parent().find(".like"),i=$(this).parent().find(".clearlike"),n=e.data("id");$.getJSON(window.apiUrl+"/food/dislike/"+n+"/"+window.username+"/",function(){e.addClass("selected"),o.removeClass("selected"),i.removeClass("selected")})}}),$(".buttons .clearlike").click(function(t){t.stopPropagation();var e=$(this).data("id"),o=$(this),i=o.parent().find(".like"),n=o.parent().find(".dislike");$.getJSON(window.apiUrl+"/food/reset/"+e+"/"+window.username+"/",function(){o.addClass("selected"),i.removeClass("selected"),n.removeClass("selected")})})})})}),$(".main-buttons #close").click(function(){$(".modal-wrapper.open").click(),$("#reloadValue").val(""),location.reload()}),$(".dismiss-button").click(function(){$(".instructions").fadeOut()});var w;$(".controls .circle").click(function(){w=$(this),w.addClass("clicked"),setTimeout(function(){w.removeClass("clicked")},400)}),$(".food-container").css({height:$(window).width()}),$("#food-photo img, #food-photo2 img").css({height:$(window).width()});var g=new Hammer(f);t();var k;$(".main-buttons .submit").click(function(){var t=getSearchQueryFood();e(t)})}();