!function(){"use strict";function t(){g=new Hammer(d),g.on("panleft panright",function(t){return 4===t.eventType?(p.animate({left:0,top:0},100),void 0):(t.deltaX<-150&&(g.off("panleft panright tap press swipeleft swiperight"),h.click()),t.deltaX>150&&(g.off("panleft panright tap press swipeleft swiperight"),m.click()),p.css({left:t.deltaX}),clearTimeout(k),k=setTimeout(function(){p.animate({left:0,top:0},100)},500),void 0)}),g.on("swipeleft",function(){g.off("panleft panright tap press swipeleft swiperight"),h.click()}),g.on("swiperight",function(){g.off("panleft panright tap press swipeleft swiperight"),m.click()}),g.on("press tap",function(){$(".controls .fa-info").click()})}function o(t){$.getJSON(window.apiUrl+"/food/list/"+window.username+"/?explore=true"+t,function(t){a=t,e(0)}).done(function(){null===localStorage.getItem("firsttime")&&($(".controls .fa-question").click(),localStorage.setItem("firsttime",!0))})}function i(o){var i,n="-100%";o?(n="100%",i=$(".likestamp")):i=$(".dislikestamp"),i.addClass("displayed"),setTimeout(function(){i.removeClass("displayed")},500),p.animate({left:n,top:0,opacity:0},500,function(){e(++f),p.css({left:0,opacity:1}),t()})}function e(t){t>a.length-1||($(".info").html(s(a[t])),p.attr("src","images/"+a[t].photo),t+1!==a.length&&(u.attr("src","images/"+a[t+1].photo),u.css("background-image","url(images/"+a[t+2].photo+")")))}var n=new Date;n=n.getTime(),0===$("#reloadValue").val().length?($("#reloadValue").val(n),$("body").show()):($("#reloadValue").val(""),location.reload());var a,l=$("#food-template").html(),s=Handlebars.compile(l),c=$("#history-template").html(),r=Handlebars.compile(c),f=0;o("");var d=document.getElementById("food-photo"),p=$("#food-photo img"),u=$("#food-photo2 img"),m=$(".controls .fa-thumbs-o-up"),h=$(".controls .fa-thumbs-o-down");h.click(function(){$.getJSON(window.apiUrl+"/food/dislike/"+a[f].id+"/"+window.username+"/"),i(!1)}),m.click(function(){$.getJSON(window.apiUrl+"/food/like/"+a[f].id+"/"+window.username+"/"),i(!0)}),$(".controls .fa-info").click(function(){window.location="food.html?id="+a[f].id}),$(".controls .fa-question").click(function(){$(".instructions").fadeToggle()}),$(".controls .fa-history").click(function(){var t=$(this).attr("id");$("#modal-"+t).addClass("open"),$("#modal-"+t+" .modal").animate({marginTop:90}),addCloseButton(t),$.getJSON(window.apiUrl+"/food/history/"+window.username+"/",function(t){$("#modal-history .history-list").html(r(t))})}),$(".dismiss-button").click(function(){$(".instructions").fadeOut()});var w;$(".controls .circle").click(function(){w=$(this),w.addClass("clicked"),setTimeout(function(){w.removeClass("clicked")},400)}),$(".food-container").css({height:$(window).width()}),$("#food-photo img, #food-photo2 img").css({height:$(window).width()});var g=new Hammer(d);t();var k;$(".main-buttons .submit").click(function(){var t=getSearchQueryFood();o(t)})}();