!function(){"use strict";function t(){$.getJSON(window.apiUrl+"/restaurant/"+l+"/"+window.username+"/",function(t){console.log(t),$(".sub-name").text(t.name)}),$.getJSON(window.apiUrl+"/photos/list/",function(t){console.log(t),a=t,o(u)})}function n(){$(".star").click(function(){$(this).toggleClass("selected"),i=[],$(".star").each(function(){$(this).hasClass("selected")&&(i[i.length]=$(this).attr("id"))})}),$(document).ready(function(){s=140,$("#submit-review").click(function(){$.post(window.apiUrl+"/review/"+window.username+"/",{rating:i.length,text:$("textarea").val(),photo:a[w],restaurant_id:l}),window.location="restaurant.html?id="+l})}),$("textarea").keyup(function(){e($(this),s),r=$(this).val()}),$(".food-container").css({height:$(window).width()}),$("#food-photo img, #food-photo2 img").css({height:$(window).width()})}function o(t){t==a.length-1?(g.attr("src","images/"+a[t]),d.attr("src","images/blank.png")):(g.attr("src","images/"+a[t]),d.attr("src","images/"+a[t+1]))}function e(t,n){var o=$("#counter > span"),e=$(t).val(),i=e.length;i>n?($(t).val(e.substr(0,n)),$(o).html(i-1)):$(o).html(i),20>=n-i&&$(o).addClass("warning")}var i,a,s,r,c=window.location.search.substring(1),l=c.substring(c.indexOf("=")+1,c.length),h=(navigator.appName,document.getElementById("foodphoto")),g=$("#foodphoto img"),d=$("#foodphoto2 img"),u=0,w=0,f=new Hammer(h);t(),n(),f.on("panleft panright",function(t){g.css({left:t.deltaX}),"panleft"==t.type&&u<a.length&&(w=u,o(u++)),"panright"==t.type&&u>0&&(o(--u),w=u)})}();