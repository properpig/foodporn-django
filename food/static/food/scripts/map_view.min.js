function showMap(e){"use strict";$(".main-div").html('<div class="map-container"><div id="map-canvas"></div><div class="info-pane"></div></div>');var o={center:{lat:parseFloat(e[0].location.x),lng:parseFloat(e[0].location.y)},zoom:14,mapTypeControl:!1,scaleControl:!1,zoomControl:!1,streetViewControl:!1},n=new google.maps.Map(document.getElementById("map-canvas"),o),i=[],a=new google.maps.LatLngBounds,t=new google.maps.Marker({position:new google.maps.LatLng(user.x,user.y),map:n});t.infowindow=new google.maps.InfoWindow;var s="You are here";t.infowindow.setContent(s),google.maps.event.addListener(t,"click",function(){t.infowindow.open(n,t),t.setZIndex(google.maps.Marker.MAX_ZINDEX+1)}),t.setMap(n),$.each(e,function(o,s){var r=new google.maps.LatLng(s.location.x,s.location.y),l={url:"images/icons/marker.png",scaledSize:new google.maps.Size(35,35)},c=new google.maps.Marker({position:r,map:n,icon:l});c.infowindow=new google.maps.InfoWindow,google.maps.event.addListener(c,"click",function(){n.panTo(r),$.each(i,function(e,o){o.setIcon(l)}),t.infowindow.close();var a={url:"images/icons/marker-clicked.png",scaledSize:new google.maps.Size(38,38)};c.setIcon(a),c.setZIndex(google.maps.Marker.MAX_ZINDEX+1),$(".info-pane").html(infoTemplate(s)).promise().done(function(){0===o?$(".info-pane .left-arrow").css("opacity",0):$(".info-pane .left-arrow").click(function(){new google.maps.event.trigger(i[o-1],"click")}),o===e.length-1?$(".info-pane .right-arrow").css("opacity",0):$(".info-pane .right-arrow").click(function(){new google.maps.event.trigger(i[o+1],"click")})})}),c.setMap(n),a.extend(r),i.push(c)}),n.fitBounds(a);var r=google.maps.event.addListener(n,"idle",function(){n.getZoom()>14&&n.setZoom(14),google.maps.event.removeListener(r)});new google.maps.event.trigger(i[0],"click")}var infoSource=$("#info-template").html(),infoTemplate=Handlebars.compile(infoSource),user;!function(){"use strict";function e(){$.getJSON(window.apiUrl+"/directions/2/"+window.username+"/",function(e){console.log(e),user=e.user})}e()}();